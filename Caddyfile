{
    frankenphp
    order php_server before file_server
}

:8000 {
    root * /app/public
    
    # Set max request body size untuk upload
    request_body {
        max_size 100MB
    }
    
    # PHP Server configuration
    php_server {
        env APP_ENV {$APP_ENV}
        env APP_DEBUG {$APP_DEBUG}
        env DB_CONNECTION {$DB_CONNECTION}
        env DB_HOST {$DB_HOST}
        env DB_PORT {$DB_PORT}
        env DB_DATABASE {$DB_DATABASE}
        env DB_USERNAME {$DB_USERNAME}
        env DB_PASSWORD {$DB_PASSWORD}
    }
    
    # Encode responses
    encode gzip zstd
    
    # File server for static assets
    file_server
}